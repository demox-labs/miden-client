<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WASM Example</title>
</head>
<body>
    <script type="module" src="./dist/index.js"></script>
    <script type="module">
        // Example of using the exported WebClient in the browser
        import { WebClient } from './dist/index.js';
        
        async function testCreateClient() {
            try {
                const webClient = new WebClient();
                await webClient.create_client();
                return webClient;
            } catch (error) {
                console.error('Failed to create client with web store:', error);
            }
        }

        async function testStoreAndRpc(webClient) {
            try {
                await webClient.fake_new_account();
            } catch (error) {
                console.error('Failed to create client with web store:', error);
            }
        }

        async function testNewAccount(webClient) {
            const basicMutableTemplate = {
                type: "BasicMutable"
            };
            const fungibleFaucetTemplate = {
                type: "FungibleFaucet",
                decimals: 18,
                max_supply: 1000000
            };
            try {
                await webClient.new_account(basicMutableTemplate);
                await webClient.new_account(fungibleFaucetTemplate);
            } catch (error) {
                console.error('Failed to call create account:', error);
            }
        }

        async function testGetAccount(webClient) {
            try {
                await webClient.get_account("0xTestAccounStringHex");

            } catch (error) {
                console.error('Failed to call get account:', error);
            
            }
        }

        async function testGetAccount(webClient) {
            try {
                await webClient.get_account("0xTestAccounStringHex");

            } catch (error) {
                console.error('Failed to call get account:', error);
            
            }
        }

        

        let webClient = await testCreateClient();
        //await testStoreAndRpc(webClient);
        await testNewAccount(webClient);
        await testGetAccount(webClient);
        await testGetAccounts(webClient);

    </script>
</body>
</html>